var timeoutglobalvar;if(typeof String.prototype.normalize!=="function"){$.ajax({type:"GET",url:CFG_GLPI.root_doc+"/public/lib/unorm.js",dataType:"script",cache:true})}function setdisplay(e,t){var n=e;if(n.style.display!=t){n.style.display=t}return true}function cleandisplay(e){var t=document.getElementById(e);if(t){setdisplay(t,"block")}}function cleanhide(e){var t=document.getElementById(e);if(t){setdisplay(t,"none")}}function afterView(e){setdisplay(e,"none")}function menuAff(e,t){var n=document.getElementById(t);var a=n.getElementsByTagName("li");var r=null;for(var o=0;o<a.length;o++){if(a[o].id==e){r=a[o]}}n=n.getElementsByTagName("ul");if(r){var i=r.getElementsByTagName("ul");if(i){for(o=0;o<n.length;o++){setdisplay(n[o],"none")}setdisplay(i[0],"block");clearTimeout(timeoutglobalvar);r.onmouseout=function(){timeoutglobalvar=setTimeout((function(){afterView(i[0])}),300)}}}}function fillidfield(e,t){window.opener.document.forms.helpdeskform.elements.items_id.value=t;window.opener.document.forms.helpdeskform.elements.itemtype.value=e;window.close()}function markCheckboxes(e){var t=document.getElementById(e).getElementsByTagName("input");for(var n=0;n<t.length;n++){var a=t[n];if(a&&a.type=="checkbox"){if(a.disabled===false){a.checked=true}}}return true}function unMarkCheckboxes(e){var t=document.getElementById(e).getElementsByTagName("input");for(var n=0;n<t.length;n++){var a=t[n];if(a&&a.type=="checkbox"){a.checked=false}}return true}function displayOtherSelectOptions(e,t){if(e.options[e.selectedIndex].value==t){document.getElementById(t).style.display="inline"}else{document.getElementById(t).style.display="none"}return true}function checkAsCheckboxes(e,t){$("#"+t+' input[type="checkbox"]:enabled').prop("checked",$("#"+e).is(":checked"));return true}$.fn.shiftSelectable=function(){var e;var t=this;document.onkeydown=function(e){var t=e.keyCode;if(t==16){$("html").addClass("unselectable");document.onkeyup=function(){$("html").removeClass("unselectable")}}};$(t).parent().click((function(n){var a=$(this).children("input[type=checkbox]");if(!e){e=a;return}if(n.shiftKey){n.preventDefault();var r=t.index(a);var o=t.index(e);t.slice(Math.min(r,o),Math.max(r,o)+1).prop("checked",$(e).is(":checked")).trigger("change")}e=a}))};function showHideDiv(e,t,n,a){var r=$("#"+e);if(t!==""){var o=n.match(/^fa-/);var i;var l;if(!o){l=$("img[name="+t+"]");if(r.is(":visible")){l.attr("src",n)}else{l.attr("src",a)}}else{i=$("#"+t);if(r.is(":visible")){i.removeClass(a).addClass(n)}else{i.removeClass(n).addClass(a)}}}if(r.is(":visible")){r.hide()}else{r.show()}}function toogle(e,t,n,a){if(document.getElementById){if(document.getElementById(e).value=="0"){document.getElementById(e).value="1";if(t!==""){document[t].src=n}}else{document.getElementById(e).value="0";if(t!==""){document[t].src=a}}}}function toggleTableDisplay(e,t,n,a){var r=document.getElementById(e).rows;for(var o=0;o<r.length;o++){if(r[o].className.indexOf("headerRow")==-1){if(r[o].style.display=="none"){r[o].style.display="table-row";if(t!==""){document[t].src=a}}else{r[o].style.display="none";if(t!==""){document[t].src=n}}}}if(document.getElementById(e+"2")){toggleTableDisplay(e+"2","")}if(document.getElementById(e+"3")){toggleTableDisplay(e+"3","")}if(document.getElementById(e+"4")){toggleTableDisplay(e+"4","")}if(document.getElementById(e+"5")){toggleTableDisplay(e+"5","")}}function submitGetLink(e,t){var n=document.createElement("form");n.method="post";n.action=e;for(var a in t){var r=document.createElement("input");r.setAttribute("name",a);r.setAttribute("value",t[a]);n.appendChild(r)}document.body.appendChild(n);n.submit();document.body.removeChild(n)}function selectAll(e){var t=$("#"+e);var n=[];t.find("option").each((function(e,t){n[n.length]=$(t).attr("value")}));t.val(n);t.trigger("change")}function deselectAll(e){$("#"+e).val("").trigger("change")}function massiveUpdateCheckbox(e,t){var n=null;if(typeof t=="boolean"){n=t}else if(typeof t=="string"){n=$("#"+t).prop("checked")}else if(typeof t=="object"){n=$(t).prop("checked")}if(typeof n=="undefined"){return false}$(e).each((function(){if(typeof t=="undefined"){n=!$(this).prop("checked")}$(this).prop("checked",n)}));return true}var filter_timeline=function(){$(document).on("click",".filter_timeline li a",(function(e){e.preventDefault();var t=$(this);$(".h_item").addClass("h_hidden");if(t.data("type")=="reset"){$(".filter_timeline li a").removeClass("h_active");$(".h_item").removeClass("h_hidden");return}t.toggleClass("h_active");var n=[];$(".filter_timeline .h_active").each((function(){n.push(".h_content."+$(this).data("type"))}));$(n.join(", ")).each((function(){$(this).parent().removeClass("h_hidden")}));if(n.length===0){$(".h_item").removeClass("h_hidden")}}))};var read_more=function(){$(document).on("click",".long_text .read_more a, .long_text .read_more .read_more_button",(function(){$(this).parents(".long_text").removeClass("long_text");$(this).parent(".read_more").remove();return false}))};var split_button_fct_called=false;var split_button=function(){if(split_button_fct_called){return true}split_button_fct_called=true;$(document).on("click",".x-button-drop",(function(){$(this).parents(".x-split-button").toggleClass("open")}));$(document).on("click",".x-split-button",(function(e){e.stopPropagation()}));$(document).on("click",".x-button-drop-menu li",(function(e){var t=$(this);if(e.target.children.length){var n=t.parent().siblings(".x-button-drop");n.attr("class","x-button x-button-drop");var a=t.data("status");n.addClass(a);t.parents(".x-split-button").removeClass("open")}}));$(document).on("click",(function(){if($(".x-split-button").hasClass("open")){$(".x-split-button").removeClass("open")}}))};if($(window).width()<=700){var didScroll;var lastScrollTop=0;var delta=5;var navbarHeight=$("header").outerHeight();$(window).scroll((function(){didScroll=true}));setInterval((function(){if(didScroll){scollHeaderResponsive();didScroll=false}}),250);var scollHeaderResponsive=function(){var e=$(this).scrollTop();if(Math.abs(lastScrollTop-e)<=delta){return}if(e>lastScrollTop&&e>navbarHeight){$("#header").removeClass("nav-down").addClass("nav-up")}else{if(e+$(window).height()<$(document).height()){$("#header").removeClass("nav-up").addClass("nav-down")}}lastScrollTop=e}}var langSwitch=function(e){var t=e.attr("href").replace(/front\/preference.+/,"ajax/switchlang.php");$.ajax({url:t,type:"GET",success:function(e){$("#language_link").html(e);$("#debugajax").remove()}})};$((function(){if($("html").hasClass("loginpage")){return}$("#menu.fullmenu li").on("mouseover",(function(){var e=$(this).data("id");menuAff("menu"+e,"menu")}));$("body").delegate("td","mouseover mouseleave",(function(e){var t=$(this).closest("tr").children().index($(this));var n=$(this).closest("tr");if(!$(this).closest("tr").hasClass("noHover")){if(e.type=="mouseover"){n.addClass("rowHover");if(n.has("td[rowspan]").length===0){n.prevAll("tr:has(td[rowspan]):first").find("td[rowspan]").addClass("rowHover")}$(this).closest("table").find("tr:not(.noHover) th:nth-child("+(t+1)+")").addClass("headHover")}else{n.removeClass("rowHover");n.removeClass("rowHover").prevAll("tr:has(td[rowspan]):first").find("td[rowspan]").removeClass("rowHover");$(this).closest("table").find("tr:not(.noHover) th:nth-child("+(t+1)+")").removeClass("headHover")}}}));$.ui.dialog.prototype._focusTabbable=function(){};$("#language_link > a").on("click",(function(e){e.preventDefault();langSwitch($(this))}));$(document).on("keydown","#page form textarea",(function(e){if(e.ctrlKey&&e.keyCode==13){submitparentForm($(this))}}));$.widget("ui.dialog",$.extend({},$.ui.dialog.prototype,{_title:function(e){if(!this.options.title){e.html("&#160;")}else{e.html(this.options.title)}}}))}));var submitparentForm=function(e){var t=$(e).closest("form");var n=t.find("[type=submit]").filter("[name=add], [name=update]");if(n.length==1){return n.trigger("click")!==false}return false};var isImage=function(e){var t=["image/gif","image/jpeg","image/jpg","image/png"];if($.inArray(e.type,t)<0){return false}else{return true}};var getExtIcon=function(e){var t=CFG_GLPI.root_doc+"/pics/icones/"+e+"-dist.png";if(!urlExists(t)){t=CFG_GLPI.root_doc+"/pics/icones/defaut-dist.png"}return'<img src="'+t+'" title="'+e+'">'};var urlExists=function(e){var t=false;$.ajax({type:"HEAD",url:e,async:false,success:function(){t=true}});return t};var getSize=function(e){var t=["o","Kio","Mio","Gio","Tio"];var n="";t.some((function(t){if(e>1024){e=e/1024}else{n=t;return true}}));return Math.round(e*100,2)/100+n};var getBijectiveIndex=function(e){var t="";while(parseInt(e)>0){e--;t=String.fromCharCode("A".charCodeAt(0)+e%26)+t;e/=26}return t};var stopEvent=function(e){e.preventDefault();e.stopPropagation()};if($("#backtotop").length){var scrollTrigger=100,backToTop=function(){var e=$(window).scrollTop();if(e>scrollTrigger){$("#backtotop").show("slow");$("#see_debug").addClass("wbttop")}else{$("#backtotop").hide();$("#see_debug").removeClass("wbttop")}};backToTop();$(window).on("scroll",(function(){backToTop()}));$("#backtotop").on("click",(function(e){e.preventDefault();$("html,body").animate({scrollTop:0},700)}))}function _eltRealSize(e){var t=0;t+=e.outerHeight();t+=parseFloat(e.css("margin-top").replace("px",""));t+=parseFloat(e.css("margin-bottom").replace("px",""));t+=parseFloat(e.css("padding-top").replace("px",""));t+=parseFloat(e.css("padding-bottom").replace("px",""));return t}var initMap=function(e,t,n){t=typeof t!=="undefined"?t:"map";n=typeof n!=="undefined"?n:"200px";if(n=="full"){var a=$(window).height();var r=0;$("#header_top, #c_menu, #c_ssmenu2, #footer, .search_page").each((function(){r+=_eltRealSize($(this))}));r+=parseFloat($("#page").css("padding-top").replace("px",""));r+=parseFloat($("#page").css("padding-bottom").replace("px",""));r+=parseFloat($("#page").css("margin-top").replace("px",""));r+=parseFloat($("#page").css("margin-bottom").replace("px",""));var o=Math.floor(a-r);var i=300;if(o<i){o=i}n=o+"px"}e.append($('<div id="'+t+'" style="height: '+n+'"></div>'));var l=L.map(t,{fullscreenControl:true}).setView([43.6112422,3.8767337],6);L.tileLayer("https://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:"&copy; <a href='https://osm.org/copyright'>OpenStreetMap</a> contributors"}).addTo(l);return l};var showMapForLocation=function(e){var t=$(e).data("fid");var n=$("#"+t).val();if(n==0){return}var a=$('<div id="location_map_dialog"/>');a.appendTo("body").dialog({close:function(){$(this).dialog("destroy").remove()}});var r=initMap($("#location_map_dialog"),"location_map");r.spin(true);$.ajax({dataType:"json",method:"POST",url:CFG_GLPI.root_doc+"/ajax/getMapPoint.php",data:{itemtype:"Location",items_id:$("#"+t).val()}}).done((function(e){if(e.success===false){a.dialog("close");$("<div>"+e.message+"</div>").dialog({close:function(){$(this).dialog("destroy").remove()}})}else{var t=[];var n=L.marker([e.lat,e.lng]);t.push(n);var o=L.featureGroup(t).addTo(r);r.fitBounds(o.getBounds(),{padding:[50,50],maxZoom:10})}})).always((function(){r.spin(false)}))};var query={};function markMatch(e,t){var n=e.toUpperCase().indexOf(t.toUpperCase());var a=$("<span></span>");if(n<0){a.append(escapeMarkupText(e));return a.html()}a.html(escapeMarkupText(e.substring(0,n)));var r=$("<span class='select2-rendered__match'></span>");r.html(escapeMarkupText(e.substring(n,n+t.length)));a.append(r);a.append(escapeMarkupText(e.substring(n+t.length)));return a.html()}var templateResult=function(e){var t=$("<span></span>");t.attr("title",e.title);if(typeof query.term!=="undefined"&&typeof e.rendered_text!=="undefined"){t.html(e.rendered_text)}else{if(!e.text){return null}var n=e.text;if(!e.id){t.html(escapeMarkupText(n));return t}var a=query.term||"";var r=markMatch(n,a);if(e.level){var o="";var i=e.level;while(i>1){o=o+"&nbsp;&nbsp;&nbsp;";i=i-1}t.html(o+"&raquo;"+r)}else{t.html(r)}}return t};var typewatch=function(){var e=0;return function(t,n){clearTimeout(e);e=setTimeout(t,n)}}();var templateSelection=function(e){if(!("element"in e)){return e.text}if(Object.prototype.hasOwnProperty.call(e,"selection_text")){return e.selection_text}if(e.element.parentElement.nodeName=="OPTGROUP"){return e.element.parentElement.getAttribute("label")+" - "+e.text}return e.text};var getTextWithoutDiacriticalMarks=function(e){e=e.normalize("NFD");return e.replace(/[\u0300-\u036f]/g,"")};var escapeMarkupText=function(e){if(e.indexOf(">")!==-1||e.indexOf("<")!==-1){e=jQuery.fn.select2.defaults.defaults.escapeMarkup(e)}return e};function updateProgress(e){var t=$("progress#progress"+e).first();$("div[data-progressid='"+e+"']").each((function(e,n){var a=$(n);var r=a.find(".progress-fg").first();var o=t.attr("value")/t.attr("max")*100;r.width(o+"%");if(a.data("append-percent")===1){var i=a.prop("title").replace(new RegExp("\\d*%$"),t.attr("value")+"%").trim();t.prop("title",i);a.prop("title",i)}}))}function normalizeMultiDateAltField(e,t){var n=$(e).val().split(", ");var a=[];for(var r=0;r<n.length;r++){var o=$.datepicker.parseDate(t,n[r]);a.push($.datepicker.formatDate("yy-mm-dd",o))}$(e).val(a.join(", "))}function hexToRgb(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function luminance(e){var t=e.map((function(e){e/=255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}));return t[0]*.2126+t[1]*.7152+t[2]*.0722}function contrast(e,t){return(luminance(e)+.05)/(luminance(t)+.05)}function GoInFullscreen(e){if(e.requestFullscreen){e.requestFullscreen()}else if(e.mozRequestFullScreen){e.mozRequestFullScreen()}else if(e.webkitRequestFullscreen){e.webkitRequestFullscreen()}else if(e.msRequestFullscreen){e.msRequestFullscreen()}}function GoOutFullscreen(){if(document.exitFullscreen){document.exitFullscreen()}else if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else if(document.webkitExitFullscreen){document.webkitExitFullscreen()}else if(document.msExitFullscreen){document.msExitFullscreen()}}function getUuidV4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)}))}window.glpiUnsavedFormChanges=false;$(document).ready((function(){$(document).on("input",'form[data-track-changes="true"] input:not([data-track-changes=""]),'+'form[data-track-changes="true"] textarea:not([data-track-changes="false"])',(function(){window.glpiUnsavedFormChanges=true}));$(document).on("change",'form[data-track-changes="true"] select:not([data-track-changes=""])',(function(){window.glpiUnsavedFormChanges=true}));$(window).on("beforeunload",(function(e){if(window.glpiUnsavedFormChanges){e.preventDefault();return""}}));$(document).on("submit","form",(function(){window.glpiUnsavedFormChanges=false}))}));function onTinyMCEChange(e){var t=$(e.target)[0];if($(t.targetElm).data("trackChanges")!==false){if($(t.formElement).data("trackChanges")===true){window.glpiUnsavedFormChanges=true}}}function relativeDate(e){var t=(+new Date-Date.parse(e))/1e3,n=t/60,a=n/60,r=a/24,o=r/365.242199,i;return(i=Math.round(t))===1?__("just now"):n<1.01?"%s seconds ago".replace("%s",i):(i=Math.round(n))===1?__("a minute ago"):a<1.01?"%s minutes ago".replace("%s",i):(i=Math.round(a))===1?__("an hour ago"):r<1.01?"%s hours ago".replace("%s",i):(i=Math.round(r))===1?__("yesterday"):o<1.01?"%s days ago".replace("%s",i):(i=Math.round(o))===1?__("a year ago"):"%s years ago".replace("%s",i)}